<!DOCTYPE html>
<html>
<head>
    <title>生活費入力画面</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="{{url_for('static',filename='style_life.css') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <p>年、月ごとに生活費を入力してください。</p>
    <br>
    <form method="POST" action="{{ url_for('update_life_details') }}">
        <table>
            <tr>
                <th>年</th>
                <th>月</th>
                <th>家賃</th>
                <th>水道代</th>
                <th>電気代</th>
                <th>ガス代</th>
                
            </tr>
            {% for detail in life_details %}
            <tr>
                <td>
                    <input type="hidden" name="year-{{ loop.index }}" value="{{ detail[0] }}">
                    {{ detail[0] }}
                </td>
                <td>
                    <input type="hidden" name="month-{{ loop.index }}" value="{{ detail[1] }}">
                    {{ detail[1] }}
                </td>
                <td>
                    <span id="rent-value-{{ loop.index }}">{{ detail[2] }}</span>
                    <button type="button" onclick="toggleEdit('rent', {{ loop.index }})">編集</button>
                    <div id="rent-edit-{{ loop.index }}" style="display:none;">
                        <input type="number" name="rent-{{ loop.index }}" value="{{ detail[2] }}" id="rent-input-{{ loop.index }}">
                        <button type="submit" name="submit-rent-{{ loop.index }}">確定</button>
                    </div>
                </td>
                <td>
                    <span id="water-value-{{ loop.index }}">{{ detail[3] }}</span>
                    <button type="button" onclick="toggleEdit('water', {{ loop.index }})">編集</button>
                    <div id="water-edit-{{ loop.index }}" style="display:none;">
                        <input type="number" name="water-{{ loop.index }}" value="{{ detail[3] }}" id="water-input-{{ loop.index }}">
                        <button type="submit" name="submit-rent-{{ loop.index }}">確定</button>
                    </div>
                </td>
                <td>
                    <span id="electricity-value-{{ loop.index }}">{{ detail[4] }}</span>
                    <button type="button" onclick="toggleEdit('electricity', {{ loop.index }})">編集</button>
                    <div id="electricity-edit-{{ loop.index }}" style="display:none;">
                        <input type="number" name="electricity-{{ loop.index }}" value="{{ detail[4] }}" id="electricity-input-{{ loop.index }}">
                        <button type="submit" name="submit-rent-{{ loop.index }}">確定</button>
                    </div>
                </td>
                <td>
                    <span id="gas-value-{{ loop.index }}">{{ detail[5] }}</span>
                    <button type="button" onclick="toggleEdit('gas', {{ loop.index }})">編集</button>
                    <div id="gas-edit-{{ loop.index }}" style="display:none;">
                        <input type="number" name="gas-{{ loop.index }}" value="{{ detail[5] }}" id="gas-input-{{ loop.index }}">
                        <button type="submit" name="submit-rent-{{ loop.index }}">確定</button>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </table>

    </form>
    <a href="{{ url_for('index')}}">家事実績入力一覧へ戻る</a>

    <script>
        function toggleEdit(type, index) {
            const editDiv = document.getElementById(type + '-edit-' + index);
            editDiv.style.display = editDiv.style.display === 'none' ? 'block' : 'none';
        }

        function confirmEdit(type, index) {
            const inputValue = document.getElementById(type + '-input-' + index).value;
            document.getElementById(type + '-value-' + index).innerText = inputValue;
            // ここでAJAXを使ってサーバーに更新を送信することもできます
            toggleEdit(type, index); // 入力フォームを閉じる
        }

        function updateValue(type, index, value) {
            document.getElementById(type + '-value-' + index).innerText = value;
            // ここでAJAXを使ってサーバーに更新を送信することもできます
        }
    </script>
</body>
</html>
